{% extends 'Core/Notification/_row.part.html.twig' %}

{% set icon = 'comment' %}
{% set entity = ladb_entity(notification.activity.comment.entityType, notification.activity.comment.entityId) %}

{% block body %}
    a commentÃ©
    {% if entity.type >= 10 and entity.type < 100 %} {# Knowledge value #}
        {% set childEntity = entity %}
        {% set parentEntity = ladb_entity(childEntity.parentEntityType, childEntity.parentEntityId) %}
        {% set fieldDef = parentEntity.fieldDefs[childEntity.parentEntityField] %}
        {% set fieldType = fieldDef[constant('ATTRIB_TYPE', parentEntity)] %}
        {% set fieldSuffix = fieldDef[constant('ATTRIB_SUFFIX', parentEntity)] is defined ? fieldDef[constant('ATTRIB_SUFFIX', parentEntity)] : null %}
        {% set isYour = childEntity.user is defined and childEntity.user == app.user %}
        {% if isYour %}votre{% else %}la{% endif %} proposition pour le champ <em>{{ ('knowledge.'~parentEntity.strippedName~'.field.'~childEntity.parentEntityField)|trans() }}</em> de {{ ('notification.the.'~ladb_entity_type_stripped_name(parentEntity))|trans() }} "<strong>{{ parentEntity.title|raw }}</strong>".
    {% else %}
        {% set isYour = entity.user is defined and entity.user == app.user %}
        {{ ('notification.'~(isYour ? 'your' : 'the')~'.'~ladb_entity_type_stripped_name(entity))|trans() }} "<strong>{{ entity.title }}</strong>".
    {% endif %}
{% endblock %}